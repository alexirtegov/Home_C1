
/*
Аргументы командной строки — 
это **способ передачи инструкций и данных программе при запуске**.  
Парсинг — 
**процесс превращения сырого массива строк `argv` 
в структурированные данные**, которые программа может использовать.

# Пример 1: Просто включить робота
./робот

# Пример 2: Сказать роботу: "Сделай 42 бутерброда и покажи инструкцию"
./робот -s 42 -h

  
   - argv[0] всегда содержит имя, под которым была запущена программа.
   - argv[1] - первый аргумент, argv[2] - второй, и так далее до argv[argc-1].
   - argv[argc] всегда является NULL (указателем в конец массива).

Пример запуска программы в терминале:

./program apple 42 "hello world"
В программе это преобразуется в:

argc = 4 (4 элемента: имя программы + 3 аргумента)
argv[0] = "./program" (имя программы)
argv[1] = "apple"
argv[2] = "42"
argv[3] = "hello world"
argv[4] = NULL (завершающий NULL-указатель)

Для того чтобы передать аргументы -s 42 -h
нужно в поле execute дописать к "./%e" значение -s 42 -h через пробел:
"./%e" -s 42 -h

1. `argv` — это массив строк (массив указателей на символы). Каждый элемент `argv[i]` — это строка, представляющая один аргумент командной строки.

2. `char *str = argv[i];` — мы присваиваем указатель `str` на строку, которая является i-м аргументом.

3. `if (str[0] == '-')` — проверяем первый символ этой строки. Если первый символ это минус ('-'), то считаем, что это флаг.

Примеры:

- Для аргумента `-s`:
  - `str[0]` — это символ `'-'`.
  - `str[1]` — это символ `'s'`.

- Для аргумента `-h`:
  - `str[0]` — это символ `'-'`.
  - `str[1]` — это символ `'h'`.

Таким образом, условие `if (str[0] == '-')` будет истинным для любых аргументов, которые начинаются с минуса. В том числе и для `-s`, и для `-h`.
*/
#include <stdio.h>

int main(int argc, char *argv[]) {
	// argc - количество аргументов (включая имя программы)
    // argv[] - массив строк (аргументы в виде текста)
    int size = 0;	// Переменная для хранения числа после флага -s
    
    for (int i = 0; i < argc; i++) {
        printf("Index = %d, Argument = %s\n", i, argv[i]);
        
    char *str = argv[i];  // Берём i-й аргумент как строку
    if (str[0] == '-') {  // Если аргумент начинается с минуса (это флаг!)
        
            switch (str[1]) {	// Смотрим второй символ флага (букву после минуса)
                case 'h':     //Случай 1: Флаг -h (помощь)
                    printf("HELP\n"); //Если ввели -h → выводим HELP.
                    break;
                    
                case 's':
                    if (i + 1 < argc) { // Проверяем, есть ли следующий аргумент
                        sscanf(argv[i + 1], "%d", &size); // - Функция `sscanf` возвращает количество успешно преобразованных аргументов, если не найдет число вернет 0
                        printf("Size set to: %d\n", size);
                        i++; // Пропускаем следующий аргумент
                    } else {
                        printf("Error: -s requires an argument!\n");
                    }
                    break;
                    
                default:
                    printf("Unknown flag: %s\n", str);
                    break;
            }
        }
    }
    return 0;
}
